Напишите кроссбраузерную функцию insertBefore(elem, html), которая:
Вставляет HTML-строку html перед элементом elem, используя insertAdjacentHTML,
Если он не поддерживается (старый Firefox) — то сделать альтернативную реализацию.